/*============================================================================
 * @author     : Jae Yong Lee (leejaeyong7@gmail.com)
 * @file       : EnvironmentObjectPrefab.cs
 * @brief      : Event handler for Environment objects
 * Copyright (c) Jae Yong Lee / UIUC Fall 2016
 =============================================================================*/
//----------------------------------------------------------------------------//
//                               CLASS IMPORTS                                //
//----------------------------------------------------------------------------//
using UnityEngine;
using System.Collections;
using System.Collections.Generic;
using com.ootii.Messages;
//----------------------------------------------------------------------------//
//                             END CLASS IMPORTS                              //
//----------------------------------------------------------------------------//
//----------------------------------------------------------------------------//
//                             CLASS DEFINITIONS                              //
//----------------------------------------------------------------------------//
public class EnvironmentObjectPrefab {
	//********************************************************************//
	//***************************BEGIN VARIABLES**************************//
	//********************************************************************//
	//====================================================================//
	//                    PUBLIC VARIABLE DEFINITIONS                     //
	//====================================================================//
	public Texture2D thumbnail;
	public Mesh modelMesh;
	public Material[] modelMaterials;

	//====================================================================//
	//                  END PUBLIC VARIABLE DEFINITIONS                   //
	//====================================================================//
	//====================================================================//
	//                    PRIVATE VARIABLE DEFINITIONS                    //
	//====================================================================//
	//====================================================================//
	//                  END PRIVATE VARIABLE DEFINITIONS                  //
	//====================================================================//
	//********************************************************************//
	//****************************END VARIABLES***************************//
	//********************************************************************//
	//********************************************************************//
	//****************************BEGIN METHODS***************************//
	//********************************************************************//
	//====================================================================//
	//                 MONOBEHAVIOR FUNCTION DEFINITIONS                  //
	//====================================================================//
	//====================================================================//
	//               END MONOBEHAVIOR FUNCTION DEFINITIONS                //
	//====================================================================//
	//====================================================================//
	//                     PUBLIC METHOD DEFINITIONS                      //
	//====================================================================//
	/**
	 * Default Constructor; initializes values
	 */
	public EnvironmentObjectPrefab()
	{
		thumbnail = new Texture2D(50,50);
		modelMesh = new Mesh();
		modelMaterials = new Material[modelMesh.subMeshCount];	
	}
	/**
	 * Constructor using prefab; expects obj to have mesh / materials
	 */
	public EnvironmentObjectPrefab(GameObject obj)
	{
		MeshRenderer mr = obj.GetComponentInChildren<MeshRenderer>();
		MeshFilter mf = obj.GetComponentInChildren<MeshFilter>();
		SkinnedMeshRenderer smr = obj.GetComponentInChildren<SkinnedMeshRenderer>();
		if (mr != null && mf != null)
		{
			modelMaterials = mr.materials;
			modelMesh = mf.mesh;
			
		}
		else if (smr != null)
		{

		}
		else {
			throw new System.Exception("Mesh not available!");
		}
	}
	//====================================================================//
	//                   END PUBLIC METHOD DEFINITIONS                    //
	//====================================================================//
	//====================================================================//
	//                     PRIVATE METHOD DEFINITIONS                     //
	//====================================================================//
	//====================================================================//
	//                   END PRIVATE METHOD DEFINITIONS                   //
	//====================================================================//
	//********************************************************************//
	//*****************************END METHODS****************************//
	//********************************************************************//
	//********************************************************************//
	//******************************BEGIN ETC*****************************//
	//********************************************************************//
	//====================================================================//
	//                    HELPER FUNCTION DEFINITIONS                     //
	//====================================================================//
	//====================================================================//
	//                  END HELPER FUNCTION DEFINITIONS                   //
	//====================================================================//
	//********************************************************************//
	//*******************************END ETC******************************//
	//********************************************************************//
}
//----------------------------------------------------------------------------//
//                           END CLASS DEFINITIONS                            //
//----------------------------------------------------------------------------//
